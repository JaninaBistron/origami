<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button color=dark (click)="dismissModal('close')">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title *ngIf="type == 'nav'">
      <ion-icon name="navigate" color="primary"></ion-icon> Navigationsaufgabe
    </ion-title>
    <ion-title *ngIf="type == 'theme'">
      <ion-icon name="clipboard" color="secondary"></ion-icon> Themenaufgabe
    </ion-title>
    <ion-buttons slot="end">
      <!--Beim Klicken soll sich ein Pop-Up mit dem Task-Showroom öffnen-->
      <ion-button color=dark>
        <ion-icon name="help"></ion-icon>
      </ion-button>
      <ion-button color=dark (click)="dismissModal(null)">
        <ion-icon name="save"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-text>
    <h5>Aufgabentyp</h5>
  </ion-text>
  <select placeholder="Auswählen" [ngModel]="selectedTask" (ngModelChange)="onTaskSelected($event)">
    <option [ngValue]="task" *ngFor="let task of tasks">{{ task.name }}</option>
  </select>

  <dynamic-form [config]="config" #form (submit)="submit($event)">
  </dynamic-form>

  <ion-text>
    <h5>Weitere Einstellungen</h5>
  </ion-text>
  <ion-item lines="none" *ngIf="selectedTask.type == 'nav-flag'">
    <ion-label>Eingabebestätigung</ion-label>
    <ion-toggle [(ngModel)]="confirmation"></ion-toggle>
  </ion-item>
  <ion-item lines="none" *ngIf="selectedTask.type == 'nav-text'">
    <ion-label>Zielfahne anzeigen</ion-label>
    <ion-toggle [(ngModel)]="showMarker"></ion-toggle>
  </ion-item>
  <ion-item lines="none"
    *ngIf="selectedTask.type == 'nav-flag' || selectedTask.type == 'nav-text' || selectedTask.type == 'nav-arrow'">
    <ion-label>Feedback</ion-label>
    <ion-toggle [(ngModel)]="feedback" color="primary"></ion-toggle>
  </ion-item>
  <ion-item lines="none" *ngIf="selectedTask.type == 'theme-loc' || selectedTask.type == 'theme-object' || selectedTask.type == 'theme-direction'">
    <ion-label>Feedback</ion-label>
    <ion-toggle [(ngModel)]="feedback" color="secondary"></ion-toggle>
  </ion-item>
  <ion-item lines="none"
    *ngIf="selectedTask.type == 'nav-flag' || selectedTask.type == 'nav-text' || selectedTask.type == 'nav-arrow'">
    <ion-label>Mehrere Versuche</ion-label>
    <ion-toggle [(ngModel)]="multipleTries" color="primary"></ion-toggle>
  </ion-item>
  <ion-item lines="none" *ngIf="selectedTask.type == 'theme-loc'|| selectedTask.type == 'theme-object' || selectedTask.type == 'theme-direction'">
    <ion-label>Mehrere Versuche</ion-label>
    <ion-toggle [(ngModel)]="multipleTries" color="secondary"></ion-toggle>
  </ion-item>
  <ion-item lines="none"
    *ngIf="selectedTask.type == 'nav-flag' || selectedTask.type == 'nav-text' || selectedTask.type == 'nav-arrow'">
    <ion-label>Genauigkeit</ion-label>
    <ion-range [(ngModel)]="accuracy" min="0" max="100" [step]="step" snaps color="primary" ticks pin (ionChange)="rangeChange()">
      <ion-label slot="start">0m</ion-label>
      <ion-icon slot="start" size="small" color="primary" name="locate"></ion-icon>
      <ion-icon slot="end" color="primary" name="locate"></ion-icon>
      <ion-label slot="end">100m</ion-label>
    </ion-range>
  </ion-item>
  <ion-item lines="none" *ngIf="selectedTask.type == 'theme-loc'">
    <ion-label>Genauigkeit</ion-label>
    <ion-range [(ngModel)]="accuracy" min="0" max="100" [step]="step" snaps color="secondary" ticks pin (ionChange)="rangeChange()">
      <ion-label slot="start">0m</ion-label>
      <ion-icon slot="start" size="small" color="secondary" name="locate"></ion-icon>
      <ion-icon slot="end" color="secondary" name="locate"></ion-icon>
      <ion-label slot="end">100m</ion-label>
    </ion-range>
  </ion-item>
  <ion-item detail lines="none" (click)="presentMapFeaturesModal()">
    <ion-label>
      Kartenfeatures
    </ion-label>
  </ion-item>
</ion-content>