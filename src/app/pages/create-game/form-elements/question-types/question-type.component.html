<!-- ****** Single-player mode ****** -->
<div *ngIf="isSinlgeMode">
  <!-- Task instruction - NavToFlag & NavWithArrow & NavViaText - Single-player mode-->
  <div *ngIf="question.type != questionTypeEnum.NAV_INSTRUCTION_PHOTO">
    <h5>
      {{ "CreateGame.taskInstruction" | translate }}
      <ion-icon name="information-circle" (click)="
          showPopover($event, 'Popover.taskInstruction')
        ">
      </ion-icon>
    </h5>
    <ion-textarea autoGrow [(ngModel)]='question.text'></ion-textarea>
    <!-- Markdown supported -->
    <ion-text color="medium">
      <p> &nbsp;
        {{ "CreateGame.markdownSupported" | translate }}
        <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.markdown')">
        </ion-icon>
      </p>
    </ion-text>
  </div>

  <!-- Task instruction - NavViaPhoto - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.NAV_INSTRUCTION_PHOTO">

    <h5>
      {{ "CreateGame.photo" | translate }}
      <ion-icon name="information-circle" (click)="showPopover($event, 'Popover.photo')">
      </ion-icon>
    </h5>
    <app-photo-upload [(photo)]="question.photo" [taskType]="taskType" theme="primary"></app-photo-upload>
    <h5>
      {{ "CreateGame.navInstruction" | translate }}
      <ion-icon name="information-circle" (click)="
      showPopover(
        $event,
        'Popover.navInstruction'
      )">
      </ion-icon>
    </h5>
    <ion-textarea autoGrow [(ngModel)]='question.text'></ion-textarea>

    <!-- Markdown supported -->
    <ion-text color="medium">
      <p>
        {{ "CreateGame.markdownSupported" | translate }}
        <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.markdown'
        )
      ">
        </ion-icon>
      </p>
    </ion-text>
  </div>

  <!-- Audio message - Single-player -->
  <div>
    <h5>
      {{ "CreateGame.audioMessage" | translate }}
      <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.audioMessage')">
      </ion-icon>
    </h5>
    <app-audio-recorder [(audioSource)]="question.audio"></app-audio-recorder>
  </div>

  <!-- Mark object - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.MAP_FEATURE">
    <h5>
      {{ "CreateGame.objectLocation" | translate }}
      <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.objectLocation')">
      </ion-icon>
    </h5>
    <app-map featureType="geometry" drawTheme="searchArea" [(feature)]="question.geometry"
      [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
  </div>

  <!-- not yet -->
  <!-- Map marking - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.MAP_FEATURE_FREE">
    <h5>
      {{ "CreateGame.markedMap" | translate }}
      <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.markedMap'
        )
      ">
      </ion-icon>
    </h5>
    <app-map featureType="geometry-free" drawTheme="searchArea" [(feature)]="question.geometry"
      [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
  </div>

  <!-- Mark object (TaskMode.NO_FEATURE) - Single-player -->
  <div *ngIf="question.mode == taskModeEnum.NO_FEATURE">
    <h5>
      {{ "CreateGame.objectLocation" | translate }}
      <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.objectLocation'
        )
      ">
      </ion-icon>
    </h5>
    <app-map featureType="geometry" drawTheme="searchArea" [(feature)]="question.geometry"
      [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
  </div>

  <!-- Photo of the object - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.MAP_FEATURE_PHOTO">
    <h5>
      {{ "CreateGame.objectPhoto" | translate }}
      <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.objectPhoto'
        )
      ">
      </ion-icon>
    </h5>
    <app-photo-upload [(photo)]="question.photo" [taskType]="taskType"></app-photo-upload>
    <h5>
      {{ "CreateGame.objectLocation" | translate }}
      <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.objectLocation'
        )
      ">
      </ion-icon>
    </h5>
    <app-map featureType="geometry" drawTheme="searchArea" [(feature)]="question.geometry"
      [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
  </div>

  <!-- Viewing direction - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.MAP_DIRECTION">
    <h5>
      {{ "CreateGame.destinationDirection" | translate }}
      <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.destinationDirection'
        )
      ">
      </ion-icon>
    </h5>
    <app-map featureType="direction" [(feature)]="question.direction" [isVirtualWorld]="isVirtualWorld"
      [isVRMirrored]="isVRMirrored"></app-map>
  </div>

  <!-- Direction on the map - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.MAP_DIRECTION_MARKER">
    <h5>
      {{ "CreateGame.directionMap" | translate }}
      <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.directionMap'
          )
        ">
      </ion-icon>
    </h5>
    <app-map featureType="direction" [(feature)]="question.direction" [isVirtualWorld]="isVirtualWorld"
      [isVRMirrored]="isVRMirrored"></app-map>
  </div>

  <!-- Photo of the direction - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.MAP_DIRECTION_PHOTO">
    <h5>
      {{ "CreateGame.photoDirection" | translate }}
      <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.photoDirection'
          )
        ">
      </ion-icon>
    </h5>
    <app-photo-upload [(photo)]="question.photo" [taskType]="taskType"></app-photo-upload>
    <h5>
      {{ "CreateGame.directionMap" | translate }}
      <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.directionMap'
          )
        ">
      </ion-icon>
    </h5>
    <app-map featureType="direction" [(feature)]="question.direction"></app-map>
  </div>

  <!-- Photo for the task - Single-player -->
  <div *ngIf="question.type == questionTypeEnum.PHOTO">
    <h5>
      {{ "CreateGame.photoTask" | translate }}
      <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.photo'
          )
        ">
      </ion-icon>
    </h5>
    <app-photo-upload [(photo)]="question.photo" [taskType]="taskType"></app-photo-upload>
  </div>

</div>
<!-- End Single-player mode ****** -->


<!-- ******************************* -->
<!-- ****** Multi-player mode ****** -->
<div *ngIf="!isSinlgeMode">
  <!-- Task instruction - NavToFlag & NavWithArrow & NavViaText - Multi-player mode-->
  <div *ngIf="question[0] != undefined && question[0].type != questionTypeEnum.NAV_INSTRUCTION_PHOTO">
    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <h5 style="margin-bottom: 10px;">
          {{ "CreateGame.taskInstruction" | translate }}
          <ion-icon name="information-circle" (click)="
          showPopover($event, 'Popover.taskInstruction')">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content style="padding-bottom: 0;">
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5> Player ({{i+1}})</h5>
          <ion-textarea autoGrow [(ngModel)]='question[i].text'></ion-textarea>
        </div>
      </ion-card-content>
      <!-- Markdown supported -->
      <ion-text color="medium">
        <p> &nbsp;
          {{ "CreateGame.markdownSupported" | translate }}
          <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.markdown')">
          </ion-icon>
        </p>
      </ion-text>
    </ion-card>

  </div>

  <!-- Task instruction - NavViaPhoto - Multi-player  -->
  <div *ngIf="question[0]!=undefined && question[0].type == questionTypeEnum.NAV_INSTRUCTION_PHOTO">

    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <!-- DoDo: add translate -->
        <h5 style="margin-bottom: 10px;">
          Photo and navigation instruction
          <ion-icon name="information-circle" (click)="
          showPopover($event, 'Popover.taskInstruction')">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content style="padding-bottom: 0;">
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5>
            {{ "CreateGame.photo" | translate }} - player ({{i+1}})
            <ion-icon name="information-circle" (click)="showPopover($event, 'Popover.photo')" *ngIf="i==0">
            </ion-icon>
          </h5>
          <app-photo-upload [(photo)]="question[i].photo" [taskType]="taskType" theme="primary"></app-photo-upload>
          <h5>
            {{ "CreateGame.navInstruction" | translate }} - player ({{i+1}})
            <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.navInstruction'
        )" *ngIf="i==0">
            </ion-icon>
          </h5>
          <ion-textarea autoGrow [(ngModel)]='question[i].text'></ion-textarea>
        </div>
      </ion-card-content>
      <!-- Markdown supported -->
      <ion-text color="medium">
        <p>
          {{ "CreateGame.markdownSupported" | translate }}
          <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.markdown'
        )
      ">
          </ion-icon>
        </p>
      </ion-text>
    </ion-card>
  </div>

  <!-- Audio message - Multi-player -->
  <ion-card style="color:black;">
    <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
      <h5>
        {{ "CreateGame.audioMessage" | translate }}
        <ion-icon name="information-circle" (click)="
            showPopover(
              $event,
              'Popover.audioMessage')">
        </ion-icon>
      </h5>

      <!-- Toggle to set differnt instruction for each player -->
      <ion-item lines="none" class="ion-no-padding">
        <ion-label>
          All players has same audio:
        </ion-label>
        <ion-toggle [(ngModel)]="question[0].allHasSameAudio">
        </ion-toggle>
      </ion-item>

    </ion-card-header>
    <ion-card-content>
      <!-- number of items based on whether all players have same task or not -->
      <div *ngFor="let e of [].constructor( (question[0] && question[0].allHasSameAudio ? 1 : numPlayers) ); let i = index"
        style="margin-bottom: 20px;">
        <h5> Player ({{i+1}})</h5>
        <app-audio-recorder [(audioSource)]="question[i].audio"></app-audio-recorder>
      </div>
    </ion-card-content>
  </ion-card>

  <!-- Mark object - Multi-player -->
  <div *ngIf="question[0] != undefined && question[0].type == questionTypeEnum.MAP_FEATURE">
    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <h5>
          {{ "CreateGame.objectLocation" | translate }}
          <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.objectLocation')">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5 style="margin-bottom: 10px;">
            Player ({{i+1}})
          </h5>
          <app-map featureType="geometry" drawTheme="searchArea" [(feature)]="question[0].geometry"
            [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- not yet -->
  <!-- Map marking - Multi-player -->
  <div *ngIf="question[0] != undefined && question[0].type == questionTypeEnum.MAP_FEATURE_FREE">
    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <h5>
          {{ "CreateGame.markedMap" | translate }}
          <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.markedMap')">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5 style="margin-bottom: 10px;">
            Player ({{i+1}})
          </h5>
          <app-map featureType="geometry-free" drawTheme="searchArea" [(feature)]="question[i].geometry"
            [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Mark object (TaskMode.NO_FEATURE) - Multi-player -->
  <div *ngIf="question[0] != undefined && question[0].mode == taskModeEnum.NO_FEATURE">
    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <h5>
          {{ "CreateGame.objectLocation" | translate }}
          <ion-icon name="information-circle" (click)="
        showPopover(
          $event,
          'Popover.objectLocation')">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5 style="margin-bottom: 10px;">
            Player ({{i+1}})
          </h5>
          <app-map featureType="geometry" drawTheme="searchArea" [(feature)]="question[i].geometry"
            [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Photo of the object - Multi-player -->
  <div *ngIf="question[0] != undefined &&  question[0].type == questionTypeEnum.MAP_FEATURE_PHOTO">
    <ion-card style="color:black;">
      <!-- <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;"> -->
      <!-- </ion-card-header> -->
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 25px;">
          <h5 style="margin-bottom: 12px; ">
            <p style="font-size: 16px;">Player ({{i+1}})</p>
          </h5>

          <h5 style="margin-bottom: 5px;">
            {{ "CreateGame.objectPhoto" | translate }}
            <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.objectPhoto')" *ngIf="i==0">
            </ion-icon>
          </h5>

          <app-photo-upload [(photo)]="question[0].photo" [taskType]="taskType"></app-photo-upload>
          <h5 style="margin-top: 10px; margin-bottom: 5px;">
            {{ "CreateGame.objectLocation" | translate }}
            <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.objectLocation')" *ngIf="i==0">
            </ion-icon>
          </h5>
          <app-map featureType="geometry" drawTheme="searchArea" [(feature)]="question[0].geometry"
            [isVirtualWorld]="isVirtualWorld" [isVRMirrored]="isVRMirrored"></app-map>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Viewing direction - Multi-player -->
  <div *ngIf="question[0] != undefined && question[0].type == questionTypeEnum.MAP_DIRECTION">
    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <h5>
          {{ "CreateGame.destinationDirection" | translate }}
          <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.destinationDirection')">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5 style="margin-bottom: 10px;">
            Player ({{i+1}})
          </h5>
          <app-map featureType="direction" [(feature)]="question[0].direction" [isVirtualWorld]="isVirtualWorld"
            [isVRMirrored]="isVRMirrored">
          </app-map>
        </div>
      </ion-card-content>
    </ion-card>
  </div>


  <!-- Direction on the map - Multi-player -->
  <div *ngIf="question[0] != undefined && question[0].type == questionTypeEnum.MAP_DIRECTION_MARKER">
    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <h5>
          {{ "CreateGame.directionMap" | translate }}
          <ion-icon name="information-circle" (click)="
          showPopover(
            $event,
            'Popover.directionMap'
          )
        ">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5 style="margin-bottom: 10px;">
            Player ({{i+1}})
          </h5>
          <app-map featureType="direction" [(feature)]="question.direction" [isVirtualWorld]="isVirtualWorld"
            [isVRMirrored]="isVRMirrored">
          </app-map>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Photo of the direction - Multi-player -->
  <div *ngIf="question[0] != undefined && question[0].type == questionTypeEnum.MAP_DIRECTION_PHOTO">
    <ion-card style="color:black;">
      <!-- <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;"> -->
      <!-- </ion-card-header> -->
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 25px;">
          <h5 style="margin-bottom: 12px; ">
            <p style="font-size: 16px;">Player ({{i+1}})</p>
          </h5>

          <h5 style="margin-bottom: 5px;">
            {{ "CreateGame.photoDirection" | translate }}
            <ion-icon name="information-circle" (click)="
            showPopover(
              $event,
              'Popover.photoDirection')" *ngIf="i==0">
            </ion-icon>
          </h5>

          <app-photo-upload [(photo)]="question[0].photo" [taskType]="taskType"></app-photo-upload>
          <h5 style="margin-top: 10px; margin-bottom: 5px;">
            {{ "CreateGame.directionMap" | translate }}
            <ion-icon name="information-circle" (click)="showPopover(
              $event,
              'Popover.directionMap')" *ngIf="i==0">
            </ion-icon>
          </h5>
          <app-map featureType="direction" [(feature)]="question[0].direction"></app-map>
        </div>
      </ion-card-content>
    </ion-card>
  </div>

  <!-- Photo for the task - Multi-player -->
  <div *ngIf="question[0] != undefined && question[0].type == questionTypeEnum.PHOTO">
    <ion-card style="color:black;">
      <ion-card-header style="color:black; font-size: medium; padding-top: 0.6rem;">
        <h5>
          {{ "CreateGame.photoTask" | translate }}
          <ion-icon name="information-circle" (click)="
            showPopover(
              $event,
              'Popover.photo')">
          </ion-icon>
        </h5>
      </ion-card-header>
      <ion-card-content>
        <div *ngFor="let e of [].constructor(numPlayers); let i = index" style="margin-bottom: 20px;">
          <h5 style="margin-bottom: 10px;">
            Player ({{i+1}})
          </h5>
          <app-photo-upload [(photo)]="question[i].photo" [taskType]="taskType">
          </app-photo-upload>
        </div>
      </ion-card-content>
    </ion-card>
  </div>


</div>
<!-- End Multi-player mode ****** -->
<!-- ******************************************************* -->